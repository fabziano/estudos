const questionario=[],outputJsonElement=document.getElementById("json"),abrirArquivoInput=document.getElementById("abrirArquivoJson");function adicionarPergunta(){const e=document.getElementById("pergunta").value.trim(),t=document.getElementById("opcaoA").value.trim(),o=document.getElementById("opcaoB").value.trim(),n=document.getElementById("opcaoC").value.trim(),a=document.getElementById("opcaoD").value.trim(),r=document.getElementById("opcaoE").value.trim(),u=document.getElementById("respostaCorreta").value,l=document.getElementById("explicacao").value.trim();if(e&&t&&o&&n&&a&&r&&u){const c={pergunta:e,opcoes:{A:t,B:o,C:n,D:a,E:r},respostaCorreta:u,explicacao:l};questionario.push(c),atualizarOutput(),limparFormulario()}else alert("Preencha todas as opções.")}function atualizarOutput(){outputJsonElement.textContent=JSON.stringify(questionario,null,2)}function limparFormulario(){document.getElementById("pergunta").value="",document.getElementById("opcaoA").value="",document.getElementById("opcaoB").value="",document.getElementById("opcaoC").value="",document.getElementById("opcaoD").value="",document.getElementById("opcaoE").value="",document.getElementById("respostaCorreta").value="A",document.getElementById("explicacao").value=""}function salvarJSON(){const e=outputJsonElement.textContent,t=new Blob([e],{type:"application/json"}),o=document.createElement("a");o.href=URL.createObjectURL(t),o.download="data.json",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(o.href)}function carregarArquivoJsonPreexistente(e){const t=e.target.files[0];if(t){const o=new FileReader;o.onload=function(e){try{const t=JSON.parse(e.target.result);Array.isArray(t)?(questionario.length=0,questionario.push(...t),atualizarOutput()):alert("O arquivo selecionado não contém um array JSON válido.")}catch(e){alert("Erro ao carregar o arquivo JSON: "+e)}},o.readAsText(t),e.target.value=null}}abrirArquivoInput&&abrirArquivoInput.addEventListener("change",carregarArquivoJsonPreexistente);
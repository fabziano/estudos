const questionarioDiv=document.getElementById("foguetinho");let perguntas=[];const dynamicBlogspotUrl=questionarioDiv.dataset.jsonUrl,blogspotUrl=dynamicBlogspotUrl||"http://jsonfoguetinho.blogspot.com",proxyUrl="https://api.allorigins.win/get?url="+encodeURIComponent(blogspotUrl);function gerarQuestionario(){questionarioDiv.innerHTML="",perguntas.forEach(((e,t)=>{const o=document.createElement("fieldset"),n=document.createElement("p");n.textContent=`${t+1}. ${e.pergunta}`,n.style.whiteSpace="pre-wrap",n.style.textAlign="justify",o.appendChild(n);const r=document.createElement("hr");o.appendChild(r);for(const n in e.opcoes){const r=document.createElement("label"),a=document.createElement("input");a.type="radio",a.name=`questao${t+1}`,a.value=n,r.appendChild(a),r.appendChild(document.createTextNode(`${n}. ${e.opcoes[n]}`));const s=document.createElement("br");o.appendChild(r),o.appendChild(s)}const a=document.createElement("button");a.textContent="Conferir",a.onclick=function(){conferir(`questao${t+1}`,e.respostaCorreta)},o.appendChild(a);const s=document.createElement("p");s.className="response",s.id=`response-questao${t+1}`,o.appendChild(s);const c=document.createElement("details"),i=document.createElement("summary");i.textContent="Explicação",c.appendChild(i);const l=document.createElement("p");l.textContent=e.explicacao,l.style.whiteSpace="pre-wrap",l.style.textAlign="justify",c.appendChild(l),o.appendChild(c),questionarioDiv.appendChild(o)}))}function conferir(e,t){let o=document.querySelector(`input[name="${e}"]:checked`),n=document.getElementById(`response-${e}`);o?o.value===t?(n.textContent="Você acertou!",n.className="response correta"):(n.textContent="Você errou!",n.className="response incorreta"):(n.textContent="Selecione uma opção!",n.className="response")}fetch(proxyUrl).then((e=>{if(!e.ok)throw new Error("Erro ao carregar a página via proxy: "+e.statusText);return e.json()})).then((e=>{const t=e.contents;let o="";const n=(new DOMParser).parseFromString(t,"text/html");let r,a=n.querySelector("pre");if(a||(a=n.querySelector("code")),a)o=a.textContent.trim();else{const e=n.body.textContent,t=e.indexOf("["),r=e.lastIndexOf("]");o=-1!==t&&-1!==r&&r>t?e.substring(t,r+1):e.trim()}try{r=JSON.parse(o)}catch(e){throw console.error("Conteúdo que tentou parsear como JSON:",o),new Error("Conteúdo JSON inválido ou não encontrado no HTML: "+e.message)}perguntas=r,gerarQuestionario()})).catch((e=>{console.error("Erro ao carregar as perguntas:",e),questionarioDiv.textContent=`Erro ao carregar o questionário: ${e.message}`,questionarioDiv.style.color="red"}));